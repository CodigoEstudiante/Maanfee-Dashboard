@page "/Roles/IndexView"
@inherits _BaseView

<div class="d-flex flex-row py-2 px-1">
    <ComponentDashboardTitle Title="@DashboardResource.StringRole" Description="" />
    <MudText Color="Color.Error" Class="pa-2 mx-2">@DashboardResource.StringList</MudText>
</div>

<MudCard>
    <MudDivider DividerType="DividerType.FullWidth" />
    <MudCardContent>
        <MudToolBar>
            <div class="justify-center mud-text-align-center">
                <MudButton Link="/Roles/CrudateView/0" Variant="Variant.Filled" Color="Color.Primary" StartIcon="@Icons.Material.Filled.Add" IconColor="Color.Surface">@DashboardResource.StringCreate</MudButton>
                <MudButton OnClick="OnRefresh" Variant="Variant.Filled" Color="Color.Secondary" StartIcon="@Icons.Material.Filled.Refresh" IconColor="Color.Surface">@DashboardResource.StringReload</MudButton>
            </div>
            <MudSpacer />
            <MudTextField T="string" ValueChanged="@(s=>OnSearch(s))" Placeholder="@DashboardResource.StringSearch" Adornment="Adornment.Start"
                          AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0">
            </MudTextField>
        </MudToolBar>
    </MudCardContent>
    <MudCardActions>
        <MudTable ServerData="@(new Func<TableState, Task<TableData<GetRoleViewModel>>>(ServerData))"
                  Dense="@_IsTableDense" Bordered="true" Striped="true" Hover="true" Virtualize="true" Loading="@IsTableLoading"
                  Style="width:100%" FixedHeader="@_IsTableFixedHeader" FixedFooter="true" Height="@(_IsTableScroll ? "330px" : "100%")">
            @*<ToolBarContent>*@
            @* *** Tabel Toolbar *** *@
            @*</ToolBarContent>*@
            <HeaderContent>
                <MudTh Class="column-1x">#</MudTh>
                <MudTh><MudTableSortLabel SortLabel="Name" T="GetRoleViewModel">@DashboardResource.StringRole</MudTableSortLabel></MudTh>
                <MudTh><MudTableSortLabel SortLabel="NormalizedName" T="GetRoleViewModel">@DashboardResource.StringNormalizedName</MudTableSortLabel></MudTh>
                <MudTh Class="column-4x">
                    <MudText Align="Align.Left">
                        <MudMenu Icon="@Icons.Material.Filled.MoreVert" Color="Color.Secondary">
                            <MudMenuItem OnClick="@(() => _IsTableDense = _IsTableDense ? false : true)">
                                <MudSwitch @bind-Checked="@_IsTableDense" Color="Color.Secondary">
                                    @DashboardResource.StringDense
                                </MudSwitch>
                            </MudMenuItem>
                            <MudMenuItem OnClick="@(() => _IsTableFixedHeader = _IsTableFixedHeader ? false : true)">
                                <MudSwitch @bind-Checked="@_IsTableFixedHeader" Color="Color.Primary">
                                    @DashboardResource.StringFixedHeader
                                </MudSwitch>
                            </MudMenuItem>
                            <MudMenuItem OnClick="@(() => _IsTableScroll = _IsTableScroll ? false : true)">
                                <MudSwitch @bind-Checked="@_IsTableScroll" Color="Color.Tertiary">
                                    @DashboardResource.StringScroll
                                </MudSwitch>
                            </MudMenuItem>
                        </MudMenu>
                    </MudText>
                </MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd Class="mud-text-align-center">@context.RowNum</MudTd>
                <MudTd>@context.Name</MudTd>
                <MudTd>@context.NormalizedName</MudTd>
                <MudTd>
                    <MudIconButton Link="@($"/Roles/PermissionView/{@context.Id}/{@context.Name}")" Title="@DashboardResource.StringManagePermission" Icon="@Icons.Material.Filled.PermDataSetting" Color="Color.Secondary" Size="Size.Small"></MudIconButton>
                    <MudIconButton Link="@($"/Roles/DetailsView/{@context.Id}")" Title="@DashboardResource.StringDetails" Icon="@Icons.Material.Filled.Details" Color="Color.Primary" Size="Size.Small"></MudIconButton>
                    <MudIconButton Link="@($"/Roles/CrudateView/{@context.Id}")" Title="@DashboardResource.StringEdit" Icon="@Icons.Material.Filled.Edit" Color="Color.Success" Size="Size.Small"></MudIconButton>
                    <MudIconButton Link="@($"/Roles/DeleteView/{@context.Id}")" Title="@DashboardResource.StringDelete" Icon="@Icons.Material.Filled.Delete" Color="Color.Error" Size="Size.Small"></MudIconButton>
                </MudTd>
            </RowTemplate>
            <NoRecordsContent>
                <MudText>@DashboardResource.MessageNoMatchingRecordsFound</MudText>
            </NoRecordsContent>
            <LoadingContent>
                <MudText>@DashboardResource.StringLoading</MudText>
            </LoadingContent>
            <PagerContent>
                <MudTablePager />
            </PagerContent>
        </MudTable>
    </MudCardActions>
</MudCard>
